<html>

<head>
  <title>Game</title>
</head>

<body>
  <h2>This is the game yall</h2>
  <button id="place-pixel-button">Place Pixel</button>
  <button id="get-board-button">Get Board</button>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js"></script>
  <script src="config.js"></script>
  <script src="api.js"></script>
  <script>
    const ws = new WebSocket(`ws://localhost:3001?token=${authToken}`);
    ws.binaryType = 'arraybuffer'

    ws.addEventListener('open', () => {
      console.log('Websocket Connection Opened');
    })

    ws.addEventListener('message', ({ data }) => {
      const unpacked = msgpack.decode(new Uint8Array(data));
      console.log('Websocket Message', unpacked);
    });

    document.getElementById('place-pixel-button').addEventListener('click', () => {
      place(1, 1, 2)
        .then((pixel) => {
          console.log(pixel);
        }).catch((err) => {
          console.error(err);
        });
    })

    document.getElementById('get-board-button').addEventListener('click', () => {
      getBoard()
        .then((board) => {
          console.log(board);
        })
    })
  </script>
</body>

</html>